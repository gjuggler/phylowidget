<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<title>PhyloWidget Step #8: Annotation</title>
<link rel="stylesheet" href="../style.css"/>
<link rel="shortcut icon" href="../img/pw.ico"/>
<script src="../scripts/phylowidget.js"></script>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<div id="content-wrapper" style="width:900px;">
<ul class="boxlist">
	<li style="">
		<a href="7.html">
			<img src='../img/pw-icon.png'/>Previous: Input/Output
		</a>
	</li>
	<li>
		<a href="../">PW Home</a>
	</li>
	<li>
		<a href="./">Step-by-Step Index</a>
	</li>
	<li style="">
		<a href="9.html">
			<img src='../img/pw-icon.png'/>Next: Web Links
		</a>
	</li>
</ul>
<div id="content" style="width:100%;">
<!-- Content! -->
<h1 style="text-align:center;clear:both;padding:5px;">Step 8 of 10: Annotation</h1>
<div style="float:left;width:425px;height:500px;border: 2px solid black;padding:3px;" id="phylowidget"></div>
<script type="text/javascript">
var fullMenus = 'dock.xml;toolbar.xml;context.xml';
var params = {
	/*
	 *  THESE SHOULD STAY THE SAME FOR ALL VIGNETTES
	 */
	codebase:'../full/lib',				// NOTE we're using PhyloWidget full for this vignette!
	width:425,
	height:500,
	/*
	 *  OK, CHANGE THESE ONES FOR INDIVIDUAL VIGNETTES
	 */
	menus:'dock.xml;toolbar.xml;context.xml',
	tree:'PhyloWidget;',
	useBranchLengths:true
};
var ensembl = {
	nodeSize:4,
	lineWidth:1
};
var geneTree = "(((BGIOSIBCA042311_ORYSA:0.11893[&&NHX:S=ORYSA:O=BGIOSIBCA042311.1:G=BGIOSIBCA042311],At3g11830_ARATH:0.103292[&&NHX:S=ARATH:O=At3g11830.1:G=At3g11830]):0.0816687[&&NHX:S=Magnoliophyta:B=99:D=N],(cct7_SCHPO:0.166585[&&NHX:S=SCHPO:O=SPBC25H2.12c:G=SPBC25H2.12c],CCT7_YEAST:0.186209[&&NHX:S=YEAST:O=YJL111W.1:G=YJL111W]):0.029676[&&NHX:S=Ascomycota:B=99:D=N]):0.00495409[&&NHX:S=Eukaryota:B=55:D=N],((((((((CCT7_HUMAN:0.0510845[&&NHX:S=HUMAN:O=ENST00000258091.4:G=ENSG00000135624],Cct7_MOUSE:0.0548045[&&NHX:S=MOUSE:O=ENSMUST00000032078.4:G=ENSMUSG00000030007]):0.0267848[&&NHX:S=Euarchontoglires:B=54:D=N],ENSMODT00000021123_MONDO:0.0837789[&&NHX:S=MONDO:O=ENSMODT00000021123.2:G=ENSMODG00000016626]):0.0255967[&&NHX:S=Theria:B=54:D=N],ENSGALT00000025922_CHICK:0.131991[&&NHX:S=CHICK:O=ENSGALT00000025922.2:G=ENSGALG00000016088]):0.0021982[&&NHX:S=Amniota:B=53:D=N],Q5D024_XENTR:0.105271[&&NHX:S=XENTR:O=ENSXETT00000025763.2:G=ENSXETG00000011778])[&&NHX:S=Tetrapoda:B=96:D=N],(cct7_BRARE:0.0999995[&&NHX:S=BRARE:O=ENSDART00000006802.3:G=ENSDARG00000007385],NEWSINFRUT00000128352_FUGRU:0.108658[&&NHX:S=FUGRU:O=NEWSINFRUT00000128352.3:G=NEWSINFRUG00000121580]):0.00780083[&&NHX:S=Clupeocephala:B=100:D=N]):0.0510091[&&NHX:S=Euteleostomi:B=97:D=N],(ENSCINT00000001715_CIOIN:0.00425529[&&NHX:S=CIOIN:O=ENSCINT00000001715.2:G=ENSCING00000000947],ENSCINT00000003265_CIOIN:0.0104703[&&NHX:S=CIOIN:O=ENSCINT00000003265.2:G=ENSCING00000001620]):0.139761[&&NHX:S=CIOIN:B=100:D=Y]):0.0066056[&&NHX:S=Chordata:B=91:D=N],(Sm00.scaff00161.0170_SCHMA:0.187113[&&NHX:S=SCHMA:O=Sm00.scaff00161.0170:G=Sm00.scaff00161.0170],(NP_503522_CAEEL:0.0698092[&&NHX:S=CAEEL:O=T10B5.5a.1:G=T10B5.5],CBG21817_CAEBR:0.0734101[&&NHX:S=CAEBR:O=CBG21817:G=CBG21817]):0.142116[&&NHX:S=Caenorhabditis:B=94:D=N])[&&NHX:S=Bilateria:B=35:D=N])[&&NHX:S=Bilateria:D=N],(NP_649835_DROME:0.0835465[&&NHX:S=DROME:O=CG8351-RA.3:G=CG8351],GA21011-PA_DROPS:0.0840653[&&NHX:S=DROPS:O=GA21011-PA:G=GA21011]):0.108617[&&NHX:S=Sophophora:B=100:D=N]):0.00495409[&&NHX:S=Bilateria:D=N])[&&NHX:S=Eukaryota:D=N];";
var thirdEx = "(((05_YEAST:0.493471[&&NHX:S=YEAST],04_SCHPO:0.318204[&&NHX:S=SCHPO]):0.157022[&&NHX:D=N:S=Ascomycota],03_ARATH:0.308649[&&NHX:S=ARATH]):0.04141[&&NHX:D=N:S=Eukaryota],((((((((08_RAT:0.102249[&&NHX:S=RAT],(13_RAT:0.095242[&&NHX:S=RAT],10_RAT:0.031982[&&NHX:S=RAT]):0.018615[&&NHX:D=Y:S=RAT]):0.014489[&&NHX:D=Y:S=RAT],11_MOUSE:0.042825[&&NHX:S=MOUSE]):0.037198[&&NHX:D=N:S=Murinae],12_HUMAN:0.060992[&&NHX:E=$-PANTR:S=HUMAN]):0.109605[&&NHX:D=N:E=$-CANFA:S=Eutheria],09_CHICK:0.105274[&&NHX:S=CHICK]):0.086729[&&NHX:D=N:E=$-XENTR:S=Amniota],06_BRARE:0.356832[&&NHX:E=$-Tetraodontidae:S=BRARE]):0.073642[&&NHX:D=N:S=Euteleostomi],(((18_HUMAN:0.077476[&&NHX:E=$-PANTR:S=HUMAN],17_MOUSE:0.066898[&&NHX:E=$-RAT:S=MOUSE]):0.142228[&&NHX:D=N:E=$-CANFA:S=Eutheria],16_CHICK:0.196657[&&NHX:S=CHICK]):0.083315[&&NHX:D=N:E=$-XENTR:S=Amniota],(15_FUGRU:0.125305[&&NHX:E=$-TETNG:S=FUGRU],14_BRARE:0.192069[&&NHX:S=BRARE]):0.133036[&&NHX:D=N:S=Clupeocephala]):0.096936[&&NHX:D=N:S=Euteleostomi]):0.06101[&&NHX:D=Y:E=$-CIOIN:S=Euteleostomi],07_DROME:0.262868[&&NHX:E=$-ANOGA-APIME:S=DROME]):0.1118[&&NHX:D=N:S=Bilateria],(02_CAEBR:0.168649[&&NHX:S=CAEBR],01_CAEEL:0.166054[&&NHX:S=CAEEL]):0.371596[&&NHX:D=N:Loglk=-18289.490411:S=Caenorhabditis]):0.083573[&&NHX:D=N:S=Bilateria])[&&NHX:D=N:S=Eukaryota];";

PhyloWidget.loadWidget('phylowidget',params);
</script>
<div style="float:right;width:425px;height:500px;border: 2px solid black;padding:3px;overflow:scroll;">
<!-- VIGNETTE CONTENT -->
<h1>Annotations: a little something extra</h1>
<p>
In the very first vignette, you may have noticed that a couple of the trees in the gallery showed up with colorful annotations
in PhyloWidget. They looked something like this:
<ul>
	<li>Colorful trees:
	<a href="javascript:PhyloWidget.changeSettings(window.ensembl);PhyloWidget.changeSetting('tree','(((ADH2:0.1[&&NHX:S=human:E=1.1.1.1], ADH1:0.11[&&NHX:S=human:E=1.1.1.1]):0.05[&&NHX:S=Primates:E=1.1.1.1:D=Y:B=100], ADHY:0.1[&&NHX:S=nematode:E=1.1.1.1],ADHX:0.12[&&NHX:S=insect:E=1.1.1.1]):0.1[&&NHX:S=Metazoa:E=1.1.1.1:D=N], (ADH4:0.09[&&NHX:S=yeast:E=1.1.1.1],ADH3:0.13[&&NHX:S=yeast:E=1.1.1.1], ADH2:0.12[&&NHX:S=yeast:E=1.1.1.1],ADH1:0.11[&&NHX:S=yeast:E=1.1.1.1]):0.1 [&&NHX:S=Fungi])[&&NHX:E=1.1.1.1:D=N];');">ADH</a>,
	<a href="javascript:PhyloWidget.changeSettings(window.ensembl);PhyloWidget.changeSetting('tree',window.geneTree);">Ensembl gene tree</a>,
	<a href="javascript:PhyloWidget.changeSettings(window.ensembl);PhyloWidget.changeSetting('tree',window.thirdEx);">a third example</a>
	</li>
</ul>
This is done using the standard NHX annotation format, which (as mentioned in the <a href="7.html">previous vignette</a>) is a simple way to add
certain annotations to a Newick-formatted tree.
<p>
When PhyloWidget detects NHX annotations in a tree, it does the following:
<ol>
<li>All nodes marked as representing a duplication event (using the <em>D=T</em> annotation) are colored red, and those marked as a speciation event (using the <em>D=F</em> annotation) are colored blue</li>
<li>Leaf nodes are grouped according to the species (<em>S</em>) or taxon (<em>T</em>) and assigned different colors according to their groups</li>
<li>Bootstrap values (<em>B</em>) are drawn on top of the branch which they represent</li>
<li>Bootstrap values are used to shade their corresponding branch</li>
</ol>
All of the above behaviors are configurable. Using PhyloWidget's configuration settings (see the <a href="10.html">last vignette</a>) you can individually
enable or disable , theAt any point, you can turn off both the display and output of annotations by going to the toolbar and choosing Tree->Annotation->Ignore Annotations.
</p>
<h1>Editing annotations</h1>
<p>
PhyloWidget provides a convenient user interface for viewing and editing tree annotations. Just click on a node with the arrow, tool,
type 'e' for edit, and 'a' for annotation, and the annotation
dialog should come up showing the annotation for the current node. Then just edit the text, making sure
to keep to the described formatting guidelines. Click "ok", and the annotation will be updated.
<p>
In this way, you can easily annotate one of your trees with the standard NHX values, causing it to become rendered just
like the NHX trees you saw above. If you then save your tree, PhyloWidget will output all annotations in the NHX format.

<h1>Going a step further</h1>
The great thing about the NHX format is that, although it formally defines only a list of 15 or so possible
annotation types (<a href="http://www.phylosoft.org/forester/NHX.html" target="_new">click here</a> for the format definition), the format is extensible to any number of non-standard annotations.
<p>
This means that you can use PhyloWidget's annotation functionality to attach <em>arbitrary information</em> to your tree. For example, you
may want to include URL links within your tree file or a PubMed ID for reference. We will be exploring a very web-aware
application of this annotation in the <a href="9.html">next vignette</a>.
<p>
When working with URLs in particular, PhyloWidget breaks away slightly from the NHX format by specially treating annotations that contain the <em>://</em>
string, as you might find in a <em>http://</em> or <em>ftp://</em> URL. Strictly, the colon character should be considered an annotation delimiter (thus making
it inappropriate to use annotations that contain valid URLs), but PhyloWidget recognizes URLs as an important special case and makes sure to keep URL annotations intact.
</p>
<ul class="boxlist" style="text-align:center;">
<li>
<a href="9.html"><img src='../img/pw-icon.png'/>Take the next step!</a>
</li>
</ul>

</div>
<div style="clear:both;"></div>
<p>

</div>
<!-- End Content! -->

<div id="footer">
Copyright © 2008 Gregory Jordan. Code released under the <a href="http://www.fsf.org/licensing/licenses/info/GPLv2.html">GPL v2</a> license.
</div>

<div id="footer2">
Created with <a href="http://processing.org/">Processing</a>.
</div>

</div>
</div>
</body>
</html>